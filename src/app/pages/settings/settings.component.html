<ngx-spinner type="ball-spin-clockwise" color="skyblue"></ngx-spinner>
<nb-card>
    <nb-card-header>
        {{title}}
    </nb-card-header>
    <nb-card-body>
        <form #form="ngForm" name="form" aria-labelledby="title" novalidate>
            <nb-accordion>
                <nb-accordion-item>
                    <nb-accordion-item-header>General Details</nb-accordion-item-header>
                    <nb-accordion-item-body>
                        <div class="form-group row">
                            <label for="locktime" class="col-sm-3 col-form-label">Checksheet Lock Time</label>
                            <div class="col-sm-9">
                                <input nbInput fullWidth type="number" class="form-control" name="locktime"
                                    [(ngModel)]="settings.locktime" placeholder="Required" required #locktime="ngModel"
                                    [status]="(locktime.dirty|| isSubmitted) ? (locktime.invalid  ? 'danger' : 'success') : ''"
                                    [attr.aria-invalid]="locktime.invalid && (locktime.touched || isSubmitted) ? true : null">
                                <ngx-validation-message label="Lock Time" [showRequired]="locktime?.errors?.required">
                                </ngx-validation-message>
                            </div>
                        </div>
                    </nb-accordion-item-body>
                </nb-accordion-item>
                <nb-accordion-item>
                    <nb-accordion-item-header>Shift</nb-accordion-item-header>
                    <nb-accordion-item-body>
                        <div *ngFor="let shift of shifts">
                            <div class="form-group row">

                                <label>Start Time ({{shift.name}})</label>
                                <div class="col-sm-4">
                                    <input type="time" class="form-control" id="startTime{{shift.name}}"
                                        [(ngModel)]="shift.startTime" name="startTime-{{shift.name}}"
                                        #startTime="ngModel" 
                                         [status]="(startTime.dirty|| isSubmitted) ? (startTime.invalid  ? 'danger' : 'success') : ''"
                                        [attr.aria-invalid]="startTime.invalid && (startTime.touched || isSubmitted) ? true : null">
                                        <ngx-validation-message label="Start Time" [showRequired]="startTime?.errors?.required">
                                        </ngx-validation-message>
                                </div>
                                <label>End Time ({{shift.name}})</label>
                                <div class="col-sm-4">
                                    <input type="time" class="form-control" id="endTime{{shift.name}}"
                                        [(ngModel)]="shift.endTime" name="endTime-{{shift.name}}" #endTime="ngModel"
                                         [status]="(endTime.dirty|| isSubmitted) ? (endTime.invalid  ? 'danger' : 'success') : ''"
                                        [attr.aria-invalid]="endTime.invalid && (endTime.touched || isSubmitted) ? true : null">
                                        <ngx-validation-message label="End Time" [showRequired]="endTime?.errors?.required">
                                        </ngx-validation-message>
                                </div>
                            </div>
                        </div>

                    </nb-accordion-item-body>
                </nb-accordion-item>
                <nb-accordion-item>
                    <nb-accordion-item-header>SMTP</nb-accordion-item-header>
                    <nb-accordion-item-body>
                        <span>
                            <div class="form-group row">
                                <label for="senderEmailAddress" class="col-sm-3 col-form-label">SMTP Sender Email
                                    Address</label>
                                <div class="col-sm-9">
                                    <input nbInput fullWidth type="text" class="form-control" name="senderEmailAddress"
                                        [(ngModel)]="settings.senderEmailAddress" placeholder="Required" required
                                        #senderEmailAddress="ngModel"
                                        [status]="(senderEmailAddress.dirty|| isSubmitted) ? (senderEmailAddress.invalid  ? 'danger' : 'success') : ''"
                                        [attr.aria-invalid]="senderEmailAddress.invalid && (senderEmailAddress.touched || isSubmitted) ? true : null">
                                    <ngx-validation-message label="SMTP Host"
                                        [showRequired]="senderEmailAddress?.errors?.required">
                                    </ngx-validation-message>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="smtpHost" class="col-sm-3 col-form-label">SMTP Host</label>
                                <div class="col-sm-9">
                                    <input nbInput fullWidth type="text" class="form-control" name="smtpHost"
                                        [(ngModel)]="settings.smtpHost" placeholder="Required" required
                                        #smtpHost="ngModel"
                                        [status]="(smtpHost.dirty|| isSubmitted) ? (smtpHost.invalid  ? 'danger' : 'success') : ''"
                                        [attr.aria-invalid]="smtpHost.invalid && (smtpHost.touched || isSubmitted) ? true : null">
                                    <ngx-validation-message label="SMTP Host"
                                        [showRequired]="smtpHost?.errors?.required">
                                    </ngx-validation-message>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="smtpPort" class="col-sm-3 col-form-label">SMTP Port</label>
                                <div class="col-sm-9">
                                    <input nbInput fullWidth type="number" id="smtpPort" class="form-control"
                                        name="smtpPort" [(ngModel)]="settings.smtpPort" placeholder="Required" required
                                        [min]="0" [max]="100000" #smtpPort="ngModel"
                                        [status]="(smtpPort.dirty || isSubmitted) ? (smtpPort.invalid ? 'danger' : 'success') : ''"
                                        [attr.aria-invalid]="smtpPort.invalid && (smtpPort.touched || isSubmitted) ? true : null">
                                    <ngx-validation-message label="SMTP Port"
                                        [showRequired]="smtpPort?.errors?.required"
                                        [showMin]="smtpPort?.hasError('min') && smtpPort.touched"
                                        [showMax]="smtpPort?.hasError('max') && smtpPort.touched" [min]="0"
                                        [max]="100000">
                                    </ngx-validation-message>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="smtpUserId" class="col-sm-3 col-form-label">SMTP UserId</label>
                                <div class="col-sm-9">
                                    <input nbInput fullWidth type="text" class="form-control" name="smtpUserId"
                                        [(ngModel)]="settings.smtpUserId" placeholder="Required" required
                                        #smtpUserId="ngModel"
                                        [status]="(smtpUserId.dirty|| isSubmitted) ? (smtpUserId.invalid  ? 'danger' : 'success') : ''"
                                        [attr.aria-invalid]="smtpUserId.invalid && (smtpUserId.touched || isSubmitted) ? true : null">
                                    <ngx-validation-message label="SMTP UserId"
                                        [showRequired]="smtpUserId?.errors?.required">
                                    </ngx-validation-message>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="smtpPassword" class="col-sm-3 col-form-label">SMTP Password</label>
                                <div class="col-sm-9">
                                    <input nbInput fullWidth type="text" class="form-control" name="smtpPassword"
                                        [(ngModel)]="settings.smtpPassword" placeholder="Required" required
                                        #smtpPassword="ngModel"
                                        [status]="(smtpPassword.dirty|| isSubmitted) ? (smtpPassword.invalid  ? 'danger' : 'success') : ''"
                                        [attr.aria-invalid]="smtpPassword.invalid && (smtpPassword.touched || isSubmitted) ? true : null">
                                    <ngx-validation-message label="SMTP Password"
                                        [showRequired]="smtpPassword?.errors?.required">
                                    </ngx-validation-message>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="isactive" class="col-sm-3 col-form-label">SMTP Enable SSL</label>
                                <div class="col-sm-9">
                                    <nb-checkbox [checked]="this.settings.smtpEnableSSL"
                                        (checkedChange)="changesmtpEnableSSL($event)"></nb-checkbox>
                                </div>
                            </div>
                        </span>
                    </nb-accordion-item-body>
                </nb-accordion-item>
            </nb-accordion>
        </form>
        <br>
        <div class="offset-sm-5 col-sm-6">
            <div class="container-btn">
                <button nbButton status="primary" (click)="submit(form)">Save</button>
            </div>
        </div>
    </nb-card-body>
</nb-card>